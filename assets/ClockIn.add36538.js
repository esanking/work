import{s as b,B as L,l as i,z as y,y as M,r as G,o as u,f as d,g as e,C as _,t as m,D as C,F as g,j as w,m as W,x as $,h as N}from"./vendor.936b408a.js";import{_ as O}from"./Message.18988a9d.js";import{_ as B}from"./index.8fd059e0.js";const U=b({components:{Message:O},setup(){const t=L();let s=i(""),h=i("");const{proxy:v}=y();let o=i({InTimeList:i([]),OutTimeList:[],name:s,id:0}),p=i(!1),n=i(!1),a=i("");M(()=>{s.value=t.params.UserName,f()});async function r(){if(n.value)return;k(),o.value.InTimeList.push(h.value);const c="https://obscure-cove-49403.herokuapp.com/CheckIn/CheckIn";await v.$http.post(c,o.value).then(l=>{n.value=!0,console.log(l.data.Message,"res.data.Message"),a.value=l.data.Message}),f()}async function I(){if(n.value)return;k(),o.value.OutTimeList.push(h.value);const c="https://obscure-cove-49403.herokuapp.com/CheckIn/CheckIn";await v.$http.post(c,o.value).then(l=>{n.value=!0,a.value=l.data.Message}),f()}async function f(){const c="https://obscure-cove-49403.herokuapp.com/CheckIn/GetCheckInRecord";await v.$http.get(c,{params:{name:s.value}}).then(l=>{l.data&&(o.value=l.data)}),T()}function k(){h.value=new Date().toLocaleString()}function T(){!o.value.OutTimeList[o.value.InTimeList.length-1]&&o.value.InTimeList.length!==0?p.value=!0:p.value=!1}return{data:o,UserName:s,WorkCheck:p,GoToWork:r,GoOffWork:I,GetDate:k,active:n,errText:a}}}),D={class:"w-100 bg-pink MtMargin"},R=e("div",{class:"ClockInImg"},null,-1),j={class:"ClockIn py-3"},F=e("h1",{class:"text-info fw-bold"},"\u6253\u5361",-1),V={class:"ClockInForm"},S={class:"FormUser"},z=e("br",null,null,-1),A=_(" \u8ACB\u6253\u5361 "),E=e("h1",null,"\u4E0A\u73ED",-1),H=[E],q=e("h1",null,"\u4E0B\u73ED",-1),J=[q],K={class:"ClockInRecord py-3"},P=e("h1",{class:"text-info fw-bold"},"\u6253\u5361\u7D00\u9304",-1),Q={class:"RecordList"},X={class:"table"},Y=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"\u59D3\u540D"),e("th",{scope:"col"},"\u4E0A\u73ED\u6642\u9593"),e("th",{scope:"col"},"\u4E0B\u73ED\u6642\u9593")])],-1);function Z(t,s,h,v,o,p){const n=G("Message");return u(),d(g,null,[e("div",D,[R,e("div",j,[F,e("div",V,[e("div",S,[_(" Hello "+m(t.UserName)+", ",1),z,A]),t.WorkCheck?C("",!0):(u(),d("div",{key:0,class:"ClockBtn bg-info",onClick:s[0]||(s[0]=(...a)=>t.GoToWork&&t.GoToWork(...a))},H)),t.WorkCheck?(u(),d("div",{key:1,class:"ClockBtn bg-info",onClick:s[1]||(s[1]=(...a)=>t.GoOffWork&&t.GoOffWork(...a))},J)):C("",!0)])]),e("div",K,[P,e("div",Q,[e("table",X,[Y,e("tbody",null,[(u(!0),d(g,null,w(t.data.InTimeList,(a,r)=>(u(),d("tr",{key:r},[e("td",null,m(t.UserName),1),e("td",null,m(t.data.InTimeList[r]),1),e("td",null,m(t.data.OutTimeList[r]),1)]))),128))])])])])]),W(N(n,{errText:t.errText,onActive:s[2]||(s[2]=a=>t.active=!t.active)},null,8,["errText"]),[[$,t.active]])],64)}var se=B(U,[["render",Z]]);export{se as default};
